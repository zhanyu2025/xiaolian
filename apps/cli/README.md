# ⌨️ 小练 - 客户端

`apps/cli` 目录包含了用于与“小练”服务端交互的文本用户界面 (TUI) 客户端。

这是一个轻量级的 Python 应用，旨在提供一个简单的方式来测试和服务端进行实时的语音对话。关于本客户端如何与服务端协同工作的全局架构，请参考**项目根目录 `README.md` 中的[架构概览](../../README.md#架构概览)**。

## 功能特性

- **实时音频流**: 使用 `pyaudio` 从麦克风捕获音频，并通过 WebSocket 实时发送到服务端。
- **实时音频播放**: 接收服务端返回的 TTS 音频流，并立即播放。
- **纯文本界面**: 无需图形界面，可以直接在终端中运行。

## 核心依赖

- **`pyaudio`**: 用于跨平台的音频 I/O，是实现麦克风录制和音频播放的核心。
- **`websockets`**: 用于与服务端建立和维护 WebSocket 连接。
- **`numpy`**: 用于进行一些基本的音频数据处理。

## 如何运行

本客户端是整个项目的一部分，并通过项目根目录的 `Makefile` 进行统一管理。

在启动服务端 (`make dev`) 之后，打开一个新的终端，运行以下命令来启动客户端：

```bash
# 在项目根目录运行
make client
```

## 注意事项

- **麦克风权限**: 首次运行时，您的操作系统可能会请求访问麦克风的权限，请予以允许。
- **系统依赖**: `pyaudio` 需要 `portaudio` 库。在 macOS 上，您可以通过 `brew install portaudio` 来安装。
- **音频设备**: `pyaudio` 会尝试使用系统的默认输入/输出设备。如果遇到问题，请确保您的麦克风和扬声器已正确配置。