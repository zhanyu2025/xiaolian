# ðŸŽ™ï¸ å°ç»ƒ (Xiaolian) - å®žæ—¶è¯­éŸ³AIåŠ©æ‰‹

å°ç»ƒæ˜¯ä¸€ä¸ªå®žæ—¶çš„è¯­éŸ³AIåŠ©æ‰‹é¡¹ç›®ï¼ŒåŒ…å«ä¸€ä¸ªå¼ºå¤§çš„æœåŠ¡ç«¯å’Œä¸€ä¸ªè½»é‡çº§çš„æ–‡æœ¬ç”¨æˆ·ç•Œé¢ï¼ˆTUIï¼‰å®¢æˆ·ç«¯ã€‚å®ƒåˆ©ç”¨ WebSocket æŠ€æœ¯è¿›è¡Œä½Žå»¶è¿Ÿçš„éŸ³é¢‘æµä¼ è¾“ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **å®žæ—¶éŸ³é¢‘æµ**ï¼šåŸºäºŽ `WebSockets` å®žçŽ°å®¢æˆ·ç«¯ä¸ŽæœåŠ¡ç«¯ä¹‹é—´çš„ä½Žå»¶è¿ŸåŒå‘éŸ³é¢‘æµã€‚
- **é«˜æ€§èƒ½WebæœåŠ¡**ï¼šä½¿ç”¨ `FastAPI` æž„å»ºå¼‚æ­¥ã€é«˜æ€§èƒ½çš„ API æœåŠ¡ï¼Œç”± `Uvicorn` é©±åŠ¨ã€‚
- **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šé€šè¿‡ `Docker` å’Œ `docker-compose` æä¾›ä¸€é”®å¼çš„æœåŠ¡ç«¯éƒ¨ç½²ï¼Œä¿è¯çŽ¯å¢ƒä¸€è‡´æ€§ã€‚
- **ä¾¿æ·çš„å¼€å‘ä½“éªŒ**ï¼š`Makefile` å°è£…äº†æ‰€æœ‰å¸¸ç”¨å‘½ä»¤ï¼Œç®€åŒ–äº†çŽ¯å¢ƒè®¾ç½®ã€ä¾èµ–ç®¡ç†å’Œåº”ç”¨å¯åœæµç¨‹ã€‚
- **çŽ°ä»£åŒ–çš„Pythonå·¥å…·é“¾**ï¼šä½¿ç”¨ `uv` è¿›è¡Œæžé€Ÿçš„ä¾èµ–ç®¡ç†å’Œè™šæ‹ŸçŽ¯å¢ƒåˆ›å»ºã€‚ä»£ç è´¨é‡ç”± `Ruff` å’Œ `Pyright` ä¿é©¾æŠ¤èˆªã€‚
- **å¯æ‰©å±•æž¶æž„**ï¼šå°†æœåŠ¡ç«¯ (`server`) å’Œå®¢æˆ·ç«¯ (`cli`) åº”ç”¨åˆ†ç¦»ï¼Œæ–¹ä¾¿ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²ã€‚

## ðŸ“‚ é¡¹ç›®ç»“æž„

```
.
â”œâ”€â”€ apps/                  # æ‰€æœ‰æºä»£ç çš„æ ¹ç›®å½•
â”‚   â”œâ”€â”€ cli/               # TUI å®¢æˆ·ç«¯åº”ç”¨
â”‚   â””â”€â”€ server/            # FastAPI æœåŠ¡ç«¯åº”ç”¨
â”‚       â”œâ”€â”€ Dockerfile     # æœåŠ¡ç«¯çš„ Docker é•œåƒå®šä¹‰
â”‚       â””â”€â”€ recordings/    # (è‡ªåŠ¨åˆ›å»º) ç”¨äºŽå­˜æ”¾å½•éŸ³æ–‡ä»¶
â”œâ”€â”€ docker-compose.yml     # Docker Compose é…ç½®ï¼Œç”¨äºŽç¼–æŽ’æœåŠ¡
â”œâ”€â”€ Makefile               # é¡¹ç›®ç®¡ç†å‘½ä»¤çš„å¿«æ·å…¥å£
â”œâ”€â”€ pyproject.toml         # é¡¹ç›®å…ƒæ•°æ®å’Œä¾èµ–å®šä¹‰ (PEP 621)
â”œâ”€â”€ README.md              # ä½ æ­£åœ¨é˜…è¯»çš„æ–‡æ¡£
â””â”€â”€ uv.lock                # ç”± uv ç”Ÿæˆçš„ç²¾ç¡®ä¾èµ–é”å®šæ–‡ä»¶
```

## ðŸš€ å¿«é€Ÿå¼€å§‹

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç³»ç»Ÿå·²ç»å®‰è£…äº†ä»¥ä¸‹è½¯ä»¶ï¼š

- Python (>=3.10, <3.13)
- [Docker](https://www.docker.com/) å’Œ Docker Compose
- [uv](https://github.com/astral-sh/uv) (Python åŒ…å®‰è£…å’Œç®¡ç†å·¥å…·)

### 1. è®¾ç½®å¹¶å¯åŠ¨å¼€å‘çŽ¯å¢ƒ

æˆ‘ä»¬å¼ºçƒˆæŽ¨èä½¿ç”¨ `make` å‘½ä»¤æ¥ç®¡ç†é¡¹ç›®ã€‚é¦–æ¬¡å¯åŠ¨ï¼Œåªéœ€ä¸€ä¸ªå‘½ä»¤å³å¯å®Œæˆæ‰€æœ‰è®¾ç½®å¹¶å¯åŠ¨æœåŠ¡ï¼š

```bash
make dev
```

è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
1.  æ£€æŸ¥å¹¶åˆ›å»º Python è™šæ‹ŸçŽ¯å¢ƒ (`.venv`)ã€‚
2.  æ ¹æ® `pyproject.toml` ç”Ÿæˆ/æ›´æ–° `uv.lock` é”æ–‡ä»¶ã€‚
3.  ä½¿ç”¨ `uv` å®‰è£…æ‰€æœ‰æœ¬åœ°å¼€å‘ä¾èµ–ã€‚
4.  ä½¿ç”¨ `docker-compose` æž„å»ºå¹¶ä»¥åŽå°æ¨¡å¼å¯åŠ¨æœåŠ¡ç«¯å®¹å™¨ã€‚

å½“çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºæ—¶ï¼Œä»£è¡¨æœåŠ¡å·²ç»å‡†å¤‡å°±ç»ªï¼š
```
âœ… Development environment is ready!
   - The server is running in the background.
   - Run 'make client' to start the TUI client.
   - Run 'make server-logs' to view server logs.
   - Run 'make server-down' to stop all services.
```

### 2. è¿è¡Œå®¢æˆ·ç«¯

æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨ TUI å®¢æˆ·ç«¯å¹¶ä¸ŽæœåŠ¡ç«¯è¿›è¡Œå®žæ—¶è¯­éŸ³äº¤äº’ï¼š

```bash
make client
```

### 3. æŸ¥çœ‹æœåŠ¡æ—¥å¿—

å¦‚æžœä½ æƒ³å®žæ—¶æŸ¥çœ‹æœåŠ¡ç«¯å®¹å™¨çš„è¾“å‡ºæ—¥å¿—ï¼Œå¯ä»¥è¿è¡Œï¼š

```bash
make server-logs
```
æŒ‰ `Ctrl+C` åœæ­¢æŸ¥çœ‹ã€‚

### 4. åœæ­¢æœåŠ¡

å½“ä½ å®Œæˆå¼€å‘æ—¶ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥åœæ­¢å¹¶ç§»é™¤æœåŠ¡ç«¯å®¹å™¨ï¼š

```bash
make server-down
```

## ðŸ› ï¸ Makefile å‘½ä»¤è¯¦è§£

`Makefile` æ˜¯æœ¬é¡¹ç›®çš„å·¥ä½œä¸­æž¢ã€‚è¿è¡Œ `make help` å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤çš„åˆ—è¡¨ã€‚

- `make dev`: (æŽ¨è) ä¸€é”®è®¾ç½®å¹¶å¯åŠ¨å®Œæ•´çš„å¼€å‘çŽ¯å¢ƒã€‚
- `make client`: å¯åŠ¨ TUI å®¢æˆ·ç«¯ã€‚
- `make server-down`: åœæ­¢å¹¶ç§»é™¤æ‰€æœ‰æœåŠ¡å®¹å™¨ã€‚
- `make setup`: (é¦–æ¬¡è¿è¡Œ) å®Œæ•´è®¾ç½®æœ¬åœ°å¼€å‘çŽ¯å¢ƒï¼ˆåˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒã€é”å®šå¹¶å®‰è£…ä¾èµ–ï¼‰ã€‚
- `make lock`: (é‡è¦) åœ¨ä¿®æ”¹ `pyproject.toml` åŽï¼Œé‡æ–°ç”Ÿæˆ `uv.lock` æ–‡ä»¶ã€‚
- `make install`: æ ¹æ® `uv.lock` æ–‡ä»¶åŒæ­¥æœ¬åœ°å¼€å‘çŽ¯å¢ƒçš„ä¾èµ–ã€‚
- `make server-build`: å¼ºåˆ¶é‡æ–°æž„å»ºå¹¶å¯åŠ¨æœåŠ¡ç«¯å®¹å™¨ã€‚
- `make server-logs`: å®žæ—¶æŸ¥çœ‹æœåŠ¡ç«¯æ—¥å¿—ã€‚
- `make format`: ä½¿ç”¨ `Ruff` æ ¼å¼åŒ–æ‰€æœ‰ä»£ç ã€‚
- `make clean`: æ¸…ç†æ‰€æœ‰è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼ˆå¦‚ `__pycache__`ã€å½•éŸ³æ–‡ä»¶å’Œ `uv.lock`ï¼‰ã€‚